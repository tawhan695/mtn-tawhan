-m models  
-c controller
-r resource
```
php artisan  make:model Defective -mcr

```

ออกแบบตาราง
ให้เก็บอะไรบ้าง 
    ให้มีความสัมพันธ์กับตาราง สินค้า product ดึง id_product 
```
id 
product_id > id table product
qty > จำนวน 
status > สาเหตุการชำรุด (คำอธิบายสั้นๆ)

```
migration
```
Schema::create('defectives', function (Blueprint $table) {
            $table->id();
            $table->unsignedInteger('qty')->default(0); // quantity
            $table->bigInteger('product_id')->unsigned()->nullable();
            $table->string('status')->nullable();
            $table->timestamps();
            $table->foreign('product_id')->references('id')->on('products')->onDelete('cascade');
        });
```

app/Models/Defective 

เพิ่มโค้ดนี้เข้าไป
```
 protected $table = "defectives";
 protected $fillable = [
        'id',
         'qty', 
         'product_id',
         'status',
        ];

```

สร้างไฟล์สำหรับ view 

resources/view/sale/defective.blade.php


หลังจากทำเสร็จแล้วก็ รีเฟรช ดาต้าเบส
```

```

factories ข้อมูลขึ้นมาใหม่
```
php artisan migrate:refresh
php artisan db:seed --class=BranchSeeder
php artisan db:seed --class=UserSeeder
php artisan db:seed --class=WalletSeeder

```

เพิ่ม Route 
```
Route::resource('defcetive',App\Http\Controllers\DefectiveController::class);

```
เรียกดูเร้าทั้งหมดที่ใช้งานได้
php artisan rout:list

สามารถเรียนใช้งานได้โดย
 ```
+--------+-----------+-------------------------------------+---------------------------------+---------------------------------------------------------------------------------+-----------------------------------------------------------+
| Domain | Method    | URI                                 | Name                            | Action
                                | Middleware                                                |
+--------+-----------+-------------------------------------+---------------------------------+---------------------------------------------------------------------------------+-----------------------------------------------------------+
|        | GET|HEAD  | defcetive                           | defcetive.index                 | App\Http\Controllers\DefectiveController@index  
                                | web                                                       |
|        | POST      | defcetive                           | defcetive.store                 | App\Http\Controllers\DefectiveController@store  
                                | web                                                       |
|        | GET|HEAD  | defcetive/create                    | defcetive.create                | App\Http\Controllers\DefectiveController@create 
                                | web                                                       |
|        | GET|HEAD  | defcetive/{defcetive}               | defcetive.show                  | App\Http\Controllers\DefectiveController@show   
                                | web                                                       |
|        | PUT|PATCH | defcetive/{defcetive}               | defcetive.update                | App\Http\Controllers\DefectiveController@update 
                                | web                                                       |
|        | DELETE    | defcetive/{defcetive}               | defcetive.destroy               | App\Http\Controllers\DefectiveController@destroy                                | web                                                       |
|        | GET|HEAD  | defcetive/{defcetive}/edit          | defcetive.edit                  | App\Http\Controllers\DefectiveController@edit   
                                | web                                                       |

 ```

 Route('defcetive.index')

นำไปใส่ใน layout app
```
          <li class="nav-item">
            <a href="{{Route('defcetive.index')}}" class="nav-link {{ request()->routeIs('defcetive.index')? 'active' : '' }}">
              <i class="nav-icon fas fa-trash"></i>
              <p>
                สินค้าชำรุด
                <span class="right badge badge-danger">2</span>
              </p>
            </a>
          </li>
```
แล้วเข้าไป set view() ที่ controller ของ Defective > DefectiveController


```
 /**
     * Create a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');
    }
    
    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        return view('sales.defective');
    }


```
